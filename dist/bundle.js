/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p:"/"};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===e(o)?o:String(o)),n)}var o}t.d({},{S:()=>Y});var r=window.Phaser,n=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.hp=3,this.gameOver=!1,this.sprite=this.scene.add.sprite(0,15,"warrior"),this.sprite.setScale(2),this.tutorialSprite=null,this.hitbox=this.scene.add.rectangle(-15,30,37,35),this.scene.physics.add.existing(this.hitbox),this.hitbox.body.setAllowGravity(!1),this.attackHitbox=this.scene.add.rectangle(0,0,80,80),this.scene.physics.add.existing(this.attackHitbox),this.attackHitbox.body.setAllowGravity(!1),this.attackHitbox.active=!1,this.attackHitboxTimer=!1,this.container=this.scene.add.container(i,n,[this.sprite,this.hitbox,this.attackHitbox]),this.scene.physics.world.enable(this.container),this.container.body.collideWorldBounds=!0,this.createAnimations(),this.displayTutorial(),this.cursors=this.scene.input.keyboard.createCursorKeys(),this.spacebar=this.scene.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.SPACE),Y&&(this.attackHitbox.setFillStyle(65280,.5),this.hitbox.setFillStyle(16711680,.5)),this.slashSound=this.scene.sound.add("slash",{volume:.11})}var e,n;return e=t,(n=[{key:"createAnimations",value:function(){this.scene.anims.create({key:"run",frames:this.scene.anims.generateFrameNumbers("warrior",{start:6,end:13}),frameRate:10,repeat:-1}),this.scene.anims.create({key:"idle",frames:this.scene.anims.generateFrameNumbers("warrior",{start:0,end:5}),frameRate:1}),this.scene.anims.create({key:"turn",frames:[{key:"warrior",frame:0}],frameRate:20}),this.scene.anims.create({key:"jump",frames:this.scene.anims.generateFrameNumbers("warrior",{start:40,end:48}),frameRate:10,repeat:0,hideOnComplete:!1}),this.scene.anims.create({key:"attack",frames:this.scene.anims.generateFrameNumbers("warrior",{start:14,end:25}),frameRate:15,repeat:-1}),this.scene.anims.create({key:"die",frames:this.scene.anims.generateFrameNumbers("warrior",{start:26,end:37}),frameRate:10,repeat:-1})}},{key:"takeDamage",value:function(t){var e=this;if(!this.gameOver&&!this.scene.gameOver){this.hp-=1,this.displayHP();var i=this.container.body;i.setVelocityY(500),"left"===t?i.setVelocityX(-1500):i.setVelocityX(1500),this.hp<=0&&(this.sprite.play("die",!0),this.gameOver=!0,this.scene.gameOver=!0,i.setVelocityX(0),this.scene.time.delayedCall(1e3,(function(){e.scene.battlemusic.stop(),e.scene.scene.start("game-over",{score:e.scene.score})})))}}},{key:"displayHP",value:function(){var t=this.scene.add.text(this.container.x,this.container.y-60,"".concat(this.hp,"/3"),{fontSize:"50px",fill:"#ff0000"});t.setDepth(2),this.scene.tweens.add({targets:t,alpha:0,duration:3e3,onComplete:function(){t.destroy()}})}},{key:"displayTutorial",value:function(){var t=this;this.tutorialSprite=this.scene.add.image(this.container.x,this.container.y-150,"keyboard"),this.tutorialSprite.setScale(2),this.tutorialSprite.setDepth(2),this.scene.tweens.add({targets:this.tutorialSprite,alpha:0,duration:1e4,onComplete:function(){t.tutorialSprite.destroy()}})}},{key:"getFacingDirection",value:function(){return this.sprite.flipX?"left":"right"}},{key:"handleSpacebarPress",value:function(){var t=this;r.Input.Keyboard.JustDown(this.spacebar)&&!this.attackHitboxTimer&&(this.attackHitboxTimer=!0,this.attacktimer=this.scene.time.delayedCall(400,(function(){t.spacebar.isDown&&(t.attackHitbox.active=!0,t.slashSound.play(),t.slashSoundRepeatEvent=t.scene.time.addEvent({delay:380,callback:function(){t.slashSound.play()},callbackScope:t,loop:!0}))}),null,this)),r.Input.Keyboard.JustUp(this.spacebar)&&(this.attackHitboxTimer=!1,this.attacktimer.remove(),this.attackHitbox.active=!1,this.attacktimer&&(this.attacktimer.remove(),this.attacktimer=null),this.slashSoundRepeatEvent&&(this.slashSoundRepeatEvent.remove(),this.slashSoundRepeatEvent=null))}},{key:"update",value:function(){if(!this.scene.gameOver){var t=r.Math.Clamp(this.container.x,0,1e3);this.container.x=t;var e=this.container.body;if(e.setVelocityX(0),this.handleSpacebarPress(),this.spacebar.isDown&&e.onFloor())this.sprite.play("attack",!0);else{if(this.spacebar.isDown&&!e.onFloor()&&this.cursors.left.isDown)return e.setVelocityX(-100),void this.sprite.play("attack",!0);if(this.spacebar.isDown&&!e.onFloor()&&this.cursors.right.isDown)return e.setVelocityX(100),void this.sprite.play("attack",!0);if(!this.spacebar.isDown||e.onFloor()){if(this.cursors.left.isDown)e.setVelocityX(-200),this.sprite.setFlipX(!0),e.onFloor()?this.sprite.play("run",!0):this.sprite.anims.isPlaying&&"jump"===this.sprite.anims.currentAnim.key||this.sprite.play("jump");else if(this.cursors.right.isDown)e.setVelocityX(200),this.sprite.setFlipX(!1),e.onFloor()?this.sprite.play("run",!0):this.sprite.anims.isPlaying&&"jump"===this.sprite.anims.currentAnim.key||this.sprite.play("jump");else{var i=this.sprite.anims.currentAnim;if(!i)return;i&&i.key.includes("run")?(e.setVelocityX(0),this.sprite.play("idle",!0)):e.onFloor()&&this.sprite.anims.currentAnim.key,this.sprite.play("idle",!0)}this.cursors.up.isDown&&e.onFloor()&&"jump"!==this.sprite.anims.currentAnim.key&&(this.sprite.play("jump"),e.setVelocityY(-250)),"left"===this.getFacingDirection()?this.hitbox.x=15:this.hitbox.x=-15,"left"===this.getFacingDirection()?this.attackHitbox.x=-10:this.attackHitbox.x=10}else this.sprite.play("attack",!0)}}}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(n)?n:String(n)),r)}var n}window.Phaser;var a=function(){function t(e,i,r,n,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.isDead=!1,this.sprite=this.scene.add.sprite(0,0,n),this.sprite.setScale(2),this.hitbox=this.scene.add.rectangle(9,13,o,s),this.scene.physics.add.existing(this.hitbox),this.hitbox.body.setAllowGravity(!1),this.container=this.scene.add.container(i,r,[this.sprite,this.hitbox]),this.scene.physics.world.enable(this.container),this.container.body.collideWorldBounds=!0,this.container.setData("instance",this),this.container.body.setOffset(0,-40),Y&&this.hitbox.setFillStyle(16711680,.5)}var e,i;return e=t,(i=[{key:"die",value:function(){}},{key:"update",value:function(){}}])&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==c(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(n)?n:String(n)),r)}var n}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var f=window.Phaser,p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(s,t);var e,i,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(n){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t,e,i,r,n){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(a=o.call(this,t,e,i,"slime",30,40)).hitboxy=40,a.warrior=r,a.slimespeed=n,a.facingDirection="right",a.isJumping=!1,a.isAttacking=!1;var c=f.Math.RND.between(7829367,16777215);return a.sprite.setTint(c),a.createAnimations(),a.sprite.active=!0,a.slimeDieSound=a.scene.sound.add("slimedie",{volume:.05}),a}return e=s,(i=[{key:"createAnimations",value:function(){this.scene.anims.create({key:"slimemove",frames:this.scene.anims.generateFrameNumbers("slime",{start:0,end:4}),frameRate:10,repeat:-1}),this.scene.anims.create({key:"slimeidle",frames:this.scene.anims.generateFrameNumbers("slime",{start:5,end:6}),frameRate:2,repeat:-1}),this.scene.anims.create({key:"slimedie",frames:this.scene.anims.generateFrameNumbers("slime",{start:7,end:22}),frameRate:10,repeat:0}),this.scene.anims.create({key:"slimejump",frames:this.scene.anims.generateFrameNumbers("slime",{start:23,end:32}),frameRate:10,repeat:0}),this.scene.anims.create({key:"slimeattack",frames:this.scene.anims.generateFrameNumbers("slime",{start:33,end:46})})}},{key:"die",value:function(){var t=this;this.isDying=!0,this.sprite.play("slimedie",!0),this.hitbox.destroy(),this.container.body.setVelocity(0,0),this.slimeDieSound.play(),this.scene.time.delayedCall(1500,(function(){t.isDead=!0,t.sprite.destroy(),t.container.destroy()}))}},{key:"jump",value:function(){var t=this;this.isJumping||(this.isJumping=!0,this.container.body.setVelocityX(0),this.initialHitboxY=this.hitbox.y,this.initialDisplayHeight=this.hitbox.displayHeight,this.scene.time.delayedCall(400,(function(){t.isDying||t.isDead||(t.container.body.setVelocityY(-250),t.sprite.play("slimejump",!0),"right"==t.facingDirection?t.container.body.setVelocityX(t.slimespeed):t.container.body.setVelocityX(-t.slimespeed))})),this.scene.time.delayedCall(500,(function(){t.hitbox.y-=t.initialDisplayHeight/.6})),this.scene.time.delayedCall(750,(function(){t.hitbox.y-=t.initialDisplayHeight/.9})),this.scene.time.delayedCall(1500,(function(){t.hitbox.y=t.initialHitboxY,t.isJumping=!1})))}},{key:"attack",value:function(){var t=this;this.isAttacking=!0,this.container.body.setVelocityX(0),this.sprite.play("slimeattack",!0),this.initialHitboxScaleX=this.hitbox.scaleX,this.initialHitboxScaleY=this.hitbox.scaleY,this.initialHitboxX=this.hitbox.x,"left"==this.facingDirection?this.hitbox.x-=15:this.hitbox.x+=15,this.hitbox.setScale(2*this.hitbox.scaleX,1.5*this.hitbox.scaleY),this.scene.time.delayedCall(1e3,(function(){t.hitbox.setScale(t.initialHitboxScaleX,t.initialHitboxScaleY),t.isAttacking=!1}))}},{key:"update",value:function(){if(!(this.isDying||this.isJumping||this.isAttacking)){var t,e=this.container.body,i=new f.Math.Vector2(this.warrior.container.x-this.container.x,this.warrior.container.y-this.container.y);i.normalize(),t=Math.abs(i.x)<.2?0:this.slimespeed,e.setVelocityX(i.x*t),this.warrior.container.x-this.container.x>-15&&0!=t?(this.sprite.play("slimemove",!0),this.sprite.setFlipX(!1),this.facingDirection="right"):this.warrior.container.x-this.container.x<15&&0!=t?(this.sprite.play("slimemove",!0),this.sprite.setFlipX(!0),this.facingDirection="left"):"left"==this.facingDirection?(this.sprite.setFlipX(!0),this.sprite.play("slimeidle",!0)):(this.sprite.setFlipX(!1),this.sprite.play("slimeidle",!0)),"left"==this.facingDirection?this.hitbox.x=10:this.hitbox.x=-10,Math.random()<.005&&e.onFloor()&&this.jump(),Math.random()<.005&&e.onFloor()&&this.attack()}}}])&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(a);const y="./static/assets/86479be2e162224bec3a.jpg",d="./static/assets/e93912eca4454debd056.png",m="./static/assets/1e4d2553f1cb3affbedc.png",b="./static/assets/12bfaf960c517d3117f4.wav",v="./static/assets/c41acb908262fcfcbd1a.mp3",g="./static/assets/6f6909df6ac0264857f1.mp3",w="./static/assets/587595b2deb8ed491282.wav",x="./static/assets/dddf1a57a8281144e5c0.png";function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function k(){k=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,i){return t[e]=i}}function l(t,e,i,n){var o=e&&e.prototype instanceof f?e:f,s=Object.create(o.prototype),a=new F(n||[]);return r(s,"_invoke",{value:x(t,i,a)}),s}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function p(){}function y(){}var d={};c(d,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(E([])));b&&b!==e&&i.call(b,o)&&(d=b);var v=y.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(r,o,s,a){var c=u(t[r],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==S(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var o;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,i){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return{value:void 0,done:!0}}for(i.method=n,i.arg=o;;){var s=i.delegate;if(s){var a=O(s,i);if(a){if(a===h)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var c=u(t,e,i);if("normal"===c.type){if(r=i.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r="completed",i.method="throw",i.arg=c.arg)}}}function O(t,e){var i=e.method,r=t.iterator[i];if(void 0===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=y,r(v,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:p,configurable:!0}),p.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var s=new w(l(e,i,r,n),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},g(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;P(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:E(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}function O(t,e,i,r,n,o,s){try{var a=t[o](s),c=a.value}catch(t){return void i(t)}a.done?e(c):Promise.resolve(c).then(r,n)}function j(t){return function(){var e=this,i=arguments;return new Promise((function(r,n){var o=t.apply(e,i);function s(t){O(o,r,n,s,a,"next",t)}function a(t){O(o,r,n,s,a,"throw",t)}s(void 0)}))}}function P(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==S(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(n)?n:String(n)),r)}var n}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var D=window.Phaser,T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(l,t);var e,i,r,o,s,a,c=(s=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(s);if(a){var i=E(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,"MainScene")).isPaused=!1,t}return e=l,i=[{key:"preload",value:function(){this.isLoading=!0,this.load.image("forest",y),this.load.image("keyboard",x),this.load.spritesheet("warrior",d,{frameWidth:69,frameHeight:44}),this.load.spritesheet("slime",m,{frameWidth:80,frameHeight:72}),this.load.audio("slash",b),this.load.audio("slimedie",v),this.load.audio("battlemusic",g),this.load.audio("hit",w)}},{key:"create",value:(o=j(k().mark((function t(){var e=this;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gameOver=!1,this.score=0,this.add.image(500,400,"forest"),this.physics.world.setBounds(-400,0,2e3,800),this.createScoreText(),t.next=7,this.createHighScore();case 7:this.warrior=new n(this,500,800),this.warrior.container.body.setCollideWorldBounds(!0),this.warriorInvincible=!1,this.slimes=this.physics.add.group({collideWorldBounds:!0}),this.slimeHitboxes=this.physics.add.group({collideWorldBounds:!0}),this.physics.add.collider(this.slimeHitboxes,this.slimeHitboxes),this.slimeCap=12,this.slimeSpeed=40,this.slimeGroup=2,this.slimeDelay=1500,this.time.addEvent({delay:this.slimeDelay,callback:function(){return e.spawnSlimes(Math.floor(e.slimeGroup),Math.ceil(e.slimeCap))},callbackScope:this,loop:!0}),this.pauseKey=this.input.keyboard.addKey(D.Input.Keyboard.KeyCodes.ESC),this.pauseOverlay=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,.5),this.pauseOverlay.setOrigin(0,0),this.pauseOverlay.setDepth(1e3),this.pauseOverlay.setVisible(!1),this.pausedText=this.add.text(this.scale.width/2,this.scale.height/2,"Paused",{fontSize:"32px",color:"#ffffff"}),this.pausedText.setOrigin(.5),this.pausedText.setDepth(1001),this.pausedText.setVisible(!1),this.isLoading=!1,this.battlemusic=this.sound.add("battlemusic",{volume:.05}),this.battlemusic.play(),this.battlemusic.loop=!0,this.hit=this.sound.add("hit",{volume:.1});case 32:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:function(){this.isLoading||(D.Input.Keyboard.JustDown(this.pauseKey)&&this.togglePause(),this.isPaused||this.gameOver||(this.warrior.update(),this.slimes.children.iterate((function(t){t.getData("instance").update()})),this.slimeCap+=.005,this.slimeSpeed+=.008,this.slimeDelay>500&&(this.slimeDelay-=.001),this.slimeGroup+=.001))}},{key:"spawnSlimes",value:function(t,e){var i=this;if(!(this.slimes.children.entries.length>Math.floor(e))){this.cleanupSlimes();var r=1050,n=1350;1==Math.ceil(2*Math.random())&&(r=-1*(r-1e3),n=-1*(n-1e3));for(var o=function(){var t=new p(i,D.Math.FloatBetween(r,n),800,i.warrior,i.slimeSpeed);t.container.body.setCollideWorldBounds(!1),t.hitbox.setData("instance",t),t.container.body.setDamping(!0),i.slimes.add(t.container),i.slimeHitboxes.add(t.hitbox),t.container.body.setVelocityX(-100),i.physics.add.overlap(i.warrior.hitbox,t.hitbox,(function(){i.warriorInvincible||(i.warrior.takeDamage("left"===i.warrior.getFacingDirection()?"right":"left"),i.makeWarriorInvincible(1e3))}),null,i),i.physics.add.overlap(i.warrior.attackHitbox,t.hitbox,(function(){i.warrior.attackHitbox.active&&(t.die(),i.score++,i.scoreText.setText("Score: ".concat(i.score)))}),null,i)},s=0;s<t;s++)o()}}},{key:"cleanupSlimes",value:function(){var t=this;this.slimes.children.each((function(e){var i=e.getData("instance");i.isDead&&(t.slimes.remove(e,!0,!0),t.slimeHitboxes.remove(i.hitbox,!0,!0))}))}},{key:"makeWarriorInvincible",value:function(t){var e=this;this.warriorInvincible||(this.hit.play(),this.warriorInvincible=!0,this.warrior.sprite.setAlpha(.5),this.warrior.gameOver||this.time.delayedCall(t,(function(){e.warriorInvincible=!1,e.warrior.sprite.setAlpha(1)})))}},{key:"createScoreText",value:function(){null==this.score&&(this.score=0),this.scoreText=this.add.text(16,16,"Score: ".concat(this.score),{fontSize:"32px",fill:"#ffffff"})}},{key:"createHighScore",value:(r=j(k().mark((function t(){var e,i,r;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("localhost"!=location.hostname&&"127.0.0.1"!=location.hostname){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("https://slimehack.herokuapp.com/api/highscores");case 4:return e=t.sent,t.next=7,e.json();case 7:i=t.sent,r=i.reduce((function(t,e){return e.score>t.score?e:t}),{score:0,initials:""}),this.highScoreText=this.add.text(this.scale.width-16,16,"High Score: ".concat(r.initials," - ").concat(r.score),{fontSize:"32px",color:"#ffffff"}),this.highScoreText.setOrigin(1,0);case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"togglePause",value:function(){this.isPaused=!this.isPaused,this.pauseOverlay.setVisible(this.isPaused),this.pausedText.setVisible(this.isPaused),this.isPaused?this.physics.pause():this.physics.resume()}}],i&&P(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(D.Scene);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function R(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==_(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(n)?n:String(n)),r)}var n}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var L=window.Phaser,X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(s,t);var e,i,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(n){var i=C(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"game-over")}return e=s,(i=[{key:"init",value:function(t){this.score=t.score}},{key:"create",value:function(){var t=this;this.cameras.main.setBackgroundColor("#000000");var e=this.cameras.main.centerX,i=this.cameras.main.centerY;this.add.text(e,i-100,"Game Over",{fontSize:"48px",color:"#FFFFFF"}).setOrigin(.5),this.add.text(e,i,"Score: ".concat(this.score),{fontSize:"32px",color:"#FFFFFF"}).setOrigin(.5),this.add.text(e,i+100,"Press [ENTER] to try again",{fontSize:"24px",color:"#FFFFFF"}).setOrigin(.5),this.add.text(e,i+150,"Enter your initials to submit your highscore.",{fontSize:"24px",color:"#FFFFFF"}).setOrigin(.5);var r=this.add.dom(e,i+250,"input","width: 100px; height: 30px; font: 24px Arial; color: black;","").setOrigin(.5);r.node.maxLength=3,r.addListener("input"),this.enter=this.input.keyboard.addKey(L.Input.Keyboard.KeyCodes.ENTER),this.enter.on("down",(function(){var e=r.node.value;!function(t,e){if(null!=e&&"localhost"!=location.hostname&&"127.0.0.1"!=location.hostname){var i={score:t,initials:e};fetch("https://slimehack.herokuapp.com/api/highscores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return t.json()})).then((function(t){}))}}(t.score,e),t.scene.start("MainScene")}))}}])&&R(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(L.Scene);const A="./static/assets/67d75f7b4e11c35b315c.png";function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function V(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==N(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===N(n)?n:String(n)),r)}var n}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}const G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(s,window.Phaser.Scene);var e,i,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(n){var i=I(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"TitleScene")}return e=s,(i=[{key:"preload",value:function(){this.load.image("title",A)}},{key:"create",value:function(){var t=this;this.add.image(500,400,"title"),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-50,"Slime Hack",{fontSize:"48px",color:"#fff",fontFamily:"Arial"}).setOrigin(.5);var e=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+50,"[Enter]",{fontSize:"24px",color:"#fff",fontFamily:"Arial"});e.setOrigin(.5),e.setInteractive({useHandCursor:!0}),e.on("pointerup",(function(){t.scene.start("MainScene")})),this.input.keyboard.on("keydown-ENTER",(function(){t.scene.start("MainScene")}))}}])&&V(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();var M=window.Phaser,K={type:M.AUTO,parent:"game-container",width:1e3,height:800,dom:{createContainer:!0},physics:{default:"arcade",arcade:{gravity:{y:500},debug:!1}},scale:{mode:M.Scale.FIT,autoCenter:M.Scale.CENTER_BOTH},scene:[G,T,X]},Y=!1;new M.Game(K)})();